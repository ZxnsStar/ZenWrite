<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZenWrite - Web App</title>
    <link rel="icon" href="img/ico.png"type="image/x-icon">

    <!-- jsPDF library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body class="light-theme">
    <!-- Header -->
    <header class="header">
        <div class="logo">
            <i class="fas fa-book"></i>
            <h1>ZenWrite</h1>
        </div>
        <div class="header-controls">
            <button class="sidebar-mobile-toggle" id="sidebarMobileToggle">
                <i class="fas fa-bars"></i>
            </button>
            <button class="theme-toggle" id="themeToggle">
                <i class="fas fa-moon"></i>
            </button>
        </div>
    </header>

    <!-- Sidebar Overlay (Mobile) -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <button class="sidebar-toggle" id="sidebarToggle" title="Sembunyikan Sidebar">
            <i class="fas fa-chevron-left"></i>
        </button>

        <!-- File Management -->
        <div class="sidebar-section">
            <div class="sidebar-title" data-title="File Management">
                <h3><i class="fas fa-file-alt"></i> <span>File</span></h3>
            </div>
            <div style="display: flex; flex-direction: column; gap: 10px;">
                <button class="btn btn-primary" id="newFileBtn" title="File Baru">
                    <i class="fas fa-file"></i> <span>File Baru</span>
                </button>
                <button class="btn btn-secondary" id="openFileBtn" title="Buka File">
                    <i class="fas fa-folder-open"></i> <span>Buka File</span>
                </button>
                <button class="btn btn-success" id="saveFileBtn" title="Simpan">
                    <i class="fas fa-save"></i> <span>Simpan</span>
                </button>
                <button class="btn btn-secondary" id="exportPdfBtn" title="Export PDF">
                    <i class="fas fa-file-pdf"></i> <span>Export PDF</span>
                </button>
            </div>
        </div>

        <!-- Paper Colors -->
        <div class="sidebar-section">
            <div class="sidebar-title" data-title="Warna Kertas">
                <h3><i class="fas fa-palette"></i> <span>Warna Kertas</span></h3>
            </div>
            <div class="paper-colors">
                <div class="paper-color active" data-color="white" style="background-color: #ffffff; color: #333;" title="Putih">
                    Putih
                </div>
                <div class="paper-color" data-color="natural" style="background: linear-gradient(135deg, #fdf6e3 0%, #f5e8c7 100%); color: #5d4037;" title="Natural">
                    Natural
                </div>
                <div class="paper-color" data-color="sepia" style="background-color: #f4ecd8; color: #4e342e;" title="Sepia">
                    Sepia
                </div>
                <div class="paper-color" data-color="blue" style="background-color: #e8f4f8; color: #01579b;" title="Biru">
                    Biru
                </div>
                <div class="paper-color" data-color="dark" style="background-color: #1e293b; color: #e2e8f0;" title="Gelap">
                    Gelap
                </div>
                <div class="paper-color" data-color="green" style="background-color: #f0f7ee; color: #2e7d32;" title="Hijau">
                    Hijau
                </div>
            </div>
        </div>

        <!-- Bookmarks -->
        <div class="sidebar-section">
            <div class="sidebar-title" data-title="Bookmarks">
                <h3><i class="fas fa-bookmark"></i> <span>Bookmark</span></h3>
                <button class="btn btn-primary btn-sm" id="addBookmarkBtn" style="padding: 5px 10px; font-size: 12px;" title="Tambah Bookmark">
                    <i class="fas fa-plus"></i> <span>Tambah</span>
                </button>
            </div>
            <div class="sidebar-content">
                <div class="bookmark-list" id="bookmarkList">
                    <!-- Bookmarks will appear here -->
                </div>
            </div>
        </div>

        <!-- Highlight Colors -->
        <div class="sidebar-section">
            <div class="sidebar-title" data-title="Stabilo">
                <h3><i class="fas fa-highlighter"></i> <span>Stabilo</span></h3>
            </div>
            <div class="highlight-colors">
                <div class="highlight-color active" data-color="yellow" style="background-color: #FFF176;" title="Kuning"></div>
                <div class="highlight-color" data-color="green" style="background-color: #81C784;" title="Hijau"></div>
                <div class="highlight-color" data-color="blue" style="background-color: #64B5F6;" title="Biru"></div>
                <div class="highlight-color" data-color="pink" style="background-color: #F48FB1;" title="Pink"></div>
                <div class="highlight-color" data-color="orange" style="background-color: #FFB74D;" title="Orange"></div>
                <div class="highlight-color" data-color="purple" style="background-color: #BA68C8;" title="Ungu"></div>
            </div>
            <div style="display: flex; gap: 10px; margin-top: 10px;">
                <button class="btn btn-primary" id="highlightBtn" style="flex: 1;" title="Terapkan Stabilo">
                    <i class="fas fa-highlighter"></i> <span>Terapkan</span>
                </button>
                <button class="btn btn-danger" id="removeHighlightBtn" style="flex: 1;" title="Hapus Stabilo">
                    <i class="fas fa-eraser"></i> <span>Hapus</span>
                </button>
            </div>
        </div>

        <!-- Statistics -->
        <div class="sidebar-section">
            <div class="sidebar-title" data-title="Statistik">
                <h3><i class="fas fa-chart-bar"></i> <span>Statistik</span></h3>
            </div>
            <div class="stats-grid">
                <div class="stat-item">
                    <div class="stat-value" id="wordCount">0</div>
                    <div class="stat-label">Kata</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="charCount">0</div>
                    <div class="stat-label">Karakter</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="lineCount">0</div>
                    <div class="stat-label">Baris</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="pageCount">1</div>
                    <div class="stat-label">Halaman</div>
                </div>
            </div>
        </div>

        <!-- Search -->
        <div class="sidebar-section">
            <div class="sidebar-title" data-title="Pencarian">
                <h3><i class="fas fa-search"></i> <span>Pencarian</span></h3>
            </div>
            <div class="search-box">
                <input type="text" id="searchInput" placeholder="Cari teks...">
                <button id="searchBtn" title="Cari"><i class="fas fa-search"></i> <span>Cari</span></button>
            </div>
            <div class="search-results" id="searchResults">
                Masukkan kata kunci
            </div>
            <div class="search-nav" id="searchNav" style="display: none;">
                <button id="prevMatch" class="btn btn-secondary" style="flex: 1;" title="Sebelumnya">
                    <i class="fas fa-chevron-left"></i> <span>Sebelumnya</span>
                </button>
                <button id="nextMatch" class="btn btn-secondary" style="flex: 1;" title="Selanjutnya">
                    <i class="fas fa-chevron-right"></i> <span>Selanjutnya</span>
                </button>
            </div>
            <div style="margin-top: 10px;">
                <button class="btn btn-secondary" id="replaceBtn" style="width: 100%;" title="Ganti Teks">
                    <i class="fas fa-exchange-alt"></i> <span>Ganti Teks</span>
                </button>
            </div>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Tab Bar Horizontal-->
        <div class="tab-bar">
            <div class="tabs-container" id="tabsContainer">
                <!-- Tabs will be dynamically added here -->
            </div>
            <button class="add-tab" id="addTabBtn">
                <i class="fas fa-plus"></i>
            </button>
        </div>

        <!-- Editor -->
        <div class="editor-container">
            <div class="editor-toolbar">
                <!-- Format Group -->
                <div class="toolbar-group">
                    <button class="toolbar-btn" id="undoBtn" title="Undo (Ctrl + Z)">
                        <i class="fas fa-undo"></i>
                    </button>
                    <button class="toolbar-btn" id="redoBtn" title="Redo (Ctrl + Y)">
                        <i class="fas fa-redo"></i>
                    </button>
                    <button class="toolbar-btn" id="copyBtn" title="Copy">
                        <i class="fas fa-copy"></i>
                    </button>
                    <button class="toolbar-btn" id="pasteBtn" title="Paste">
                        <i class="fas fa-paste"></i>
                    </button>
                    <button class="toolbar-btn" id="cutBtn" title="Cut">
                        <i class="fas fa-cut"></i>
                    </button>
                </div>

                <!-- Font Group -->
                <div class="toolbar-group">
                    <select class="font-select" id="fontSelect">
                        <option value="Arial">Arial</option>
                        <option value="'Segoe UI'">Segoe UI</option>
                        <option value="Georgia">Georgia</option>
                        <option value="'Times New Roman'">Times New Roman</option>
                        <option value="Courier">Courier</option>
                        <option value="Verdana">Verdana</option>
                    </select>
                    <select class="font-size-select" id="fontSizeSelect">
                        <option value="12">12px</option>
                        <option value="14">14px</option>
                        <option value="16">16px</option>
                        <option value="18" selected>18px</option>
                        <option value="20">20px</option>
                        <option value="24">24px</option>
                        <option value="28">28px</option>
                        <option value="32">32px</option>
                    </select>
                </div>

                <!-- Style Group -->
                <div class="toolbar-group">
                    <button class="toolbar-btn" data-command="bold" title="Bold">
                        <i class="fas fa-bold"></i>
                    </button>
                    <button class="toolbar-btn" data-command="italic" title="Italic">
                        <i class="fas fa-italic"></i>
                    </button>
                    <button class="toolbar-btn" data-command="underline" title="Underline">
                        <i class="fas fa-underline"></i>
                    </button>
                </div>

                <!-- Alignment Group -->
                <div class="toolbar-group">
                    <button class="toolbar-btn" data-command="justifyLeft" title="Align Left">
                        <i class="fas fa-align-left"></i>
                    </button>
                    <button class="toolbar-btn" data-command="justifyCenter" title="Align Center">
                        <i class="fas fa-align-center"></i>
                    </button>
                    <button class="toolbar-btn" data-command="justifyRight" title="Align Right">
                        <i class="fas fa-align-right"></i>
                    </button>
                </div>

                <!-- List Group -->
                <div class="toolbar-group">
                    <button class="toolbar-btn" data-command="insertUnorderedList" title="Bullet List">
                        <i class="fas fa-list-ul"></i>
                    </button>
                    <button class="toolbar-btn" data-command="insertOrderedList" title="Numbered List">
                        <i class="fas fa-list-ol"></i>
                    </button>
                </div>

                <!-- Color Group -->
                <div class="toolbar-group">
                    <input type="color" class="color-picker" id="textColor" value="#000000" title="Text Color">
                    <input type="color" class="color-picker" id="backgroundColor" value="#ffffff" title="Background Color (Double click for transparent)">
                    <button class="toolbar-btn" id="transparentBgBtn" title="Transparent Background">
                        <i class="fas fa-eraser"></i>
                    </button>
                </div>

                <!-- Print Group -->
                <div class="toolbar-group">
                    <button class="toolbar-btn" id="printBtn" title="Print">
                        <i class="fas fa-print"></i>
                    </button>
                    <button class="toolbar-btn" id="wordCountBtn" title="Word Count">
                        <i class="fas fa-calculator"></i>
                    </button>
                </div>
            </div>

            <!-- Editor Area -->
            <div class="editor-area paper-white" id="editorArea">
                <div class="line-numbers" id="lineNumbers">1</div>
                <div id="editor" contenteditable="true">
                    Selamat datang di ZenWrite!<br><br>
                    Anda dapat mulai mengetik di sini. Fitur yang tersedia:<br>
                    1. Format teks (bold, italic, underline)<br>
                    2. Multiple tabs untuk beberapa dokumen<br>
                    3. Bookmark untuk menandai posisi penting<br>
                    4. Stabilo dengan berbagai warna<br>
                    5. Pencarian dan penggantian teks<br>
                    6. Export ke PDF dan TXT<br>
                    7. Dark/Light mode<br>
                    8. Statistik real-time<br><br>
                    Gunakan toolbar di atas untuk mengakses semua fitur.
                </div>
            </div>
        </div>
    </main>

    <!-- Hidden textarea for copy/paste operations -->
    <textarea id="pasteArea" class="paste-area"></textarea>

    <!-- Notification -->
    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i>
        <span id="notificationText">Operasi berhasil!</span>
    </div>

    <!-- Replace Modal -->
    <div class="modal" id="replaceModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Ganti Teks</h3>
                <button class="modal-close" id="closeReplaceModal">&times;</button>
            </div>
            <div style="display: flex; flex-direction: column; gap: 15px;">
                <div>
                    <label style="display: block; margin-bottom: 5px; color: var(--text-color);">Cari:</label>
                    <input type="text" id="replaceFind" style="width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: 6px; background-color: var(--editor-bg); color: var(--text-color);">
                </div>
                <div>
                    <label style="display: block; margin-bottom: 5px; color: var(--text-color);">Ganti dengan:</label>
                    <input type="text" id="replaceWith" style="width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: 6px; background-color: var(--editor-bg); color: var(--text-color);">
                </div>
                <div>
                    <label style="display: block; margin-bottom: 5px; color: var(--text-color);">
                        <input type="checkbox" id="caseSensitive" style="margin-right: 8px;">
                        Case Sensitive
                    </label>
                </div>
                <div style="display: flex; gap: 10px;">
                    <button class="btn btn-primary" id="replaceOneBtn" style="flex: 1;">
                        Ganti Ini
                    </button>
                    <button class="btn btn-secondary" id="replaceAllBtn" style="flex: 1;">
                        Ganti Semua
                    </button>
                    <button class="btn btn-danger" id="cancelReplaceBtn" style="flex: 1;">
                        Batal
                    </button>
                </div>
            </div>
        </div>
    </div>
    <!-- Undo/Redo Status Indicator -->
    <div class="undo-status" id="undoStatus"></div>

    <!-- Color Presets Datalist -->
    <datalist id="textColorPresets">
        <option value="#333333">Default (Light)</option>
        <option value="#e4e6eb">Default (Dark)</option>
        <option value="#3498db">Biru</option>
        <option value="#2ecc71">Hijau</option>
        <option value="#e74c3c">Merah</option>
        <option value="#f39c12">Kuning</option>
        <option value="#9b59b6">Ungu</option>
    </datalist>

    <!-- Keyboard Shortcuts Help -->
    <div class="modal" id="keyboardHelp">
        <div class="modal-content">
            <div class="modal-header">
                <h3>⌨️ Keyboard Shortcuts</h3>
                <button class="modal-close" onclick="closeKeyboardHelp()">&times;</button>
            </div>
            <div style="padding: 20px; line-height: 2;">
                <p><strong>Undo/Redo:</strong></p>
                <p>• <kbd>Ctrl</kbd> + <kbd>Z</kbd> = Undo</p>
                <p>• <kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>Z</kbd> = Redo</p>
                <p>• <kbd>Ctrl</kbd> + <kbd>Y</kbd> = Redo</p>
            
                <p><strong>Color Picker:</strong></p>
                <p>• Click = Pilih warna baru</p>
                <p>• Double-click = Reset ke default</p>
            
                <p><strong>Formatting:</strong></p>
                <p>• <kbd>Ctrl</kbd> + <kbd>B</kbd> = Bold</p>
                <p>• <kbd>Ctrl</kbd> + <kbd>I</kbd> = Italic</p>
                <p>• <kbd>Ctrl</kbd> + <kbd>U</kbd> = Underline</p>
            </div>
        </div>
    </div>

    <div id="loading" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg-color); display: flex; align-items: center; justify-content: center; z-index: 9999; transition: opacity 0.3s;">
        <div style="text-align: center;">
            <div class="pdf-spinner" style="margin: 0 auto 20px;"></div>
            <p>Loading ZenWrite...</p>
        </div>
    </div>

    <!-- File Input (hidden) -->
    <input type="file" id="fileInput" accept=".txt,.html,.md" style="display: none;">
    <input type="file" id="imageInput" accept="image/*" style="display: none;">
    <script src="script.js"></script>
</html>